---
# Mariadb version 5.5 or 10.0 or 10.1
mariadb_version: "10.3"

mariadb_repo_prefix: "deb [arch=amd64] https://ftp.harukasan.org/mariadb/repo/"
mariadb_debian_repo: "{{ mariadb_repo_prefix }}/{{ mariadb_version }}/{{ ansible_distribution|lower }} {{ ansible_distribution_release }} main"

mariadb_root_password: "{{ lookup('password', '/home/ikondratyev/clients/' + ansible_fqdn + '/' + 'mysql-pass chars=ascii_letters,digits') }}"

# update my.cnf. each time role is run? yes | no
overwrite_global_mycnf: yes

mysql_enablerepo: ""

# Slow query log settings.
mysql_slow_query_log_enabled: no
mysql_slow_query_log_file: /var/log/mysql-slow.log
mysql_slow_query_time: 2

# MySQL connection settings.
mysql_port: "3306"
mysql_bind_address: '127.0.0.1'
mysql_datadir: /var/lib/mysql
# mysql_pid_file: /var/run/mysqld/mysqld.pid

# Memory settings (default values optimized ~512MB RAM).
mysql_key_buffer_size: "64M"
mysql_max_allowed_packet: "64M"
mysql_table_open_cache: "256"
mysql_sort_buffer_size: "1M"
mysql_read_buffer_size: "1M"
mysql_read_rnd_buffer_size: "4M"
mysql_myisam_sort_buffer_size: "64M"
mysql_thread_cache_size: "8"
mysql_query_cache_size: "16M"

# Other settings.
mysql_wait_timeout: 28800

# Try number of CPU's * 2 for thread_concurrency.
mysql_thread_concurrency: 2

# InnoDB settings.
# Set .._buffer_pool_size up to 80% of RAM but beware of setting too high.
mysql_innodb_file_per_table: "1"
mysql_innodb_buffer_pool_size: "2048M"
mysql_innodb_additional_mem_pool_size: "20M"

# Set .._log_file_size to 25% of buffer pool size.
mysql_innodb_log_file_size: "256M"
mysql_innodb_log_buffer_size: "8M"
mysql_innodb_flush_log_at_trx_commit: "2"
mysql_innodb_flush_method: "O_DIRECT"
mysql_innodb_lock_wait_timeout: 50

# mysqldump settings.
mysql_mysqldump_max_allowed_packet: "64M"

# Logging settings.
mysql_log: ""
mysql_log_error: /var/lib/mysql/mysql.err
mysql_syslog_tag: mysql
